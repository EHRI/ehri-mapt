<!DOCTYPE html>

<html lang="en">
<head>
    <title>{{ data.identity.title }}</title>

    <style>
        body {
            display: grid;
            color: #3d3d36;
            background-color: #ffffff;
            font-family: sans-serif;

            grid-template-areas: ". header ." ". main ." ". items .";
            grid-template-rows: min-content min-content auto;
            grid-template-columns: 20% 1fr 20%;
            margin: 0;
            padding: 0 0 5rem;
            height: 100vh;
        }

        h1, h2, h3, h4 {
            font-family: serif;
        }

        a {
            color: #84024d;
            text-decoration: none;
        }

        p {
            margin: 0 0 0.5rem;
        }

        header {
            grid-area: header;
        }
        main {
            grid-area: main;
        }

        #items {
            margin: 0;
            padding: 0;
            grid-area: items;
        }
        #mirador {
            position: relative;
            height: 100%;
        }
    </style>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
    <script src="https://unpkg.com/mirador@latest/dist/mirador.min.js"></script>
</head>
<body>
    <header>
        <h1>{{ data.identity.title }}</h1>
    </header>

    <main>
        <article>
            <aside class="metadata">
                <address>
                    {{ data.contact.holder }}
                    <br/>
                    {{ data.contact.street }}
                    <br/>
                    {{ data.contact.postcode }}
                </address>
            </aside>

            {% if data.description.biog %}
            <h2>Biographical History</h2>
            <p class="biographical-history">
                {{ data.description.biog }}
            </p>
            {% endif %}
            {% if data.description.scope %}
            <h2>The Collection</h2>
            <p class="scope-and-content">
                {{ data.description.scope }}
            </p>
            {% endif %}
        </article>

        <section id="export">
            <h2>Download as XML</h2>
            <a href="{{ name }}.xml" target="_blank">EAD 2002</a>
        </section>

    </main>
    <section id="items">
        <!-- <iframe id="mirador-embed" src="items.html" width="100%" height="600px" loading="eager"></iframe>-->
        <div id="mirador"></div>
    </section>
    <script>
      let manifest = document.location.origin + "/{{ name }}.json";

      Mirador.viewer({
        id: "mirador",
        manifests: {
          manifest: {
            provider: "EHRI"
          }
        },
        workspace: {
          isWorkspaceAddVisible: false,
          allowNewWindows: false,
        },
        workspaceControlPanel: {
          enabled: true
        },
        windows: [{
          loadedManifest: manifest,
          canvasIndex: 0,
          thumbnailNavigationPosition: 'far-bottom',
        }]
      });
    </script>
</body>
</html>